# User Stories and Use Cases

<!-- Notas: -->

<!-- Poder conocer las preguntas generales y la útilidad. Expertos de EC puedan saber de que trata sin ir al detalle o tener que compartir la propuesta. -->

<!-- Descripción de los use cases pero no llegar a explicar la implementación/propuesta/detalle. Por ejemplo la figura 4.1 potser es massa detallada. POsar-ho un nou apartat al final: on estem i detall. -->

<!-- Importante poder vislumbrar que building blocks, conditions or capabilities van a ser necesarias para poder implementarlo -->

<!-- Mirar document sobre w3i: Explicar les funcionalitats/requeriments i casos d'us. -->


## Introduction

## Definitions 

### What is a User Story and a Use Case

Is a User Story the same thing as a Use Case? Although there are some similarities between User Stories and Use Cases, User Stories and Use Cases are not interchangeable; both User Stories and Use Cases identify users and they both describe goal, but they serve different purposes.

A **user story** is an informal, natural language description of features of a software system. They are written from the perspective of an end user or user of a system. A User Story is a note that captures what a user does or needs to do as part of her work. Each User Story consists of a short description written from user's point of view, with natural language. Unlike the traditional requirement capturing, User Story focuses on what the user needs instead of what the system should deliver. This leaves room for further discussion of solutions and the result of a system that can really fit into the customers' business workflow, solving their operational problems and most importantly adding value to the organization.

A **Use case** is used to capture user (actor) point of view while describing functional requirements of the system. They describe the step by step process a user goes through to complete that goal using a software system. A Use Case is a description of all the ways an end-user wants to "use" a system. Use Cases capture all the possible ways the user and system can interact that result in the user achieving the goal. They also capture all the things that can go wrong along the way that prevent the user from achieving the goal.

### Similarity between User Stories vs Use Cases

If we consider the key component in both approaches:

-   User Stories contain, with user role, goal and acceptance criteria.

-   Use Cases contain equivalent elements: an actor, flow of events and post conditions respectively

### Diferences between User Stories vs Use Cases

User Stories are centered on the result and the benefit of the thing you're describing, whereas Use Cases can be more granular, and describe how your system will act. The details of a User Story may not be documented to the same extreme as a Use Case.

-   User Stories deliberately leave out a lot of important details. User Stories are meant to elicit conversations by asking questions during scrum meetings.

-   Small increments for getting feedback more frequently, rather than having more detailed up-front requirement specification as in Use Cases.

> User stories don't provide the details the development team needs to do their work.

<!-- > In a Use case Who is the lead beneficiary of the solution? Explain the type of users that would benefit from the solution. Explain the solution, what problem does it solve, and what is the intended user experience. For example, you could use the use case from the view of the user, as if it was a testimonial: As a (user) \_\_\_ I Can (action) \_\_\_\_ So that (value for the user) \_\_\_\_ -->



## User stories

> User Stories contain, with user role, goal and acceptance criteria.

> User Story focuses on what the user needs instead of what the system should deliver

### User Story 1: Refurbisher - impact accounting and reporting

user roles: refurbishers, suppliers (of unused devices), recycler, Final User.
goals: report lifetime extension and final recycling.

Refurbishers are business collecting used devices, repairing and reselling them.

El **refurbisher** Andròmines recibe dispositivos usados de un **supplier** de dispositivos usados (i.e: Ayuntamiento de Barcelona) que quiere que sus dispositivos se reutilizen y reciclen de manera adecuada. El refurbisher recoje y hace un inventario de los dispositivos y los filtra según potencial de reutilización. Los que tienen un potencial de reutilización bajo los mandará a un **reciclador** que los desmantela y manda a una fundición, los que son reutilizables los venderá/donará a **Final users** para que sean reutilizados. El objetivo del refurbisher es poder reportar a su supplier el impacto generado en economía circular que principalmente es el tiempo de extensión de vida del dispositivo y su reciclaje final por parte de un reciclador autorizado. En cuanto a contabilizar el impacto la dificultades para el refurbisher son: 1) poder saber si los Final Users después de su reutilización han llevado a un punto autorizado de reciclaje el dispositivo, 2) saber si los recicladores a los que manda lo que no es potencialmente reutilizable estan autorizados por las autoridades competentes y 3) saber durante cuantas horas y años se han reutilizado los dispositivos. Esta información debería ser verificable  y auditable por parte del refurbisher, suppliers y auditores a los que el refurbisher se lo permita. Entendemos por verificable la posibilidad de tener la certeza que en una transferencia de dispositivos las dos partes han participado (confirmando) y que se han transferido unos dispositivos con una identidad única. 

Testimonials:

> As a (user) \_\_\_ I Can (action) \_\_\_\_ So that (value for the user) \_\_\_\_

As a refurbisher I can :

1. Puedo saber las horas de extensión de tiempo de vida de los dispositivos que di a un reseller o a un Final user

2. Puedo saber si los Final Users han reciclado los dispositivos al final de su tiempo de vida útil

3. Puedo generar un informe de cadena de custódia que ... y cada transferencia es verificable

4. Puedo generar un informe de impacto agregado y el impacto de cada device puede ser conocido

Ejemplo: De los 100 dispositivos que el donante me dió puedo saber:
    -   70 se han reutilizado por parte de usuarios finales que han extendido el tiempo de vida en X horas y 30 se han reciclado sin reutilización por tal usuario
    -   de 70 reutilizados se tenemos conformidad del reciclaje de 30 de ellos y se han reciclado por estos usuarios (no hace falta que sea anónimo)


### User Story 2: Refurbisher - seller of second-hand devices

user roles: refurbishers, resellers and Final User.
goals: report the refurbishment process and quality of second hand devices refurbished

El **refurbisher** Solidança ha reacondicionado (reparación / upgrade / install SO) un conjunto de dispositivos. Quiere poder informar a sus potenciales compradores que son **resellers** (B2B) o **Final Users** (B2C) de: 1) la identidad del dispositivo y una descripción de los componentes que incluye, 2) el proceso de reacondicionado (borrado de datos, tests,.....). El refurbisher debe poder mandar esta información a sus potenciales compradores mediante web o documentos y estos poder verificar que esta información es creible, entendido como: 1) se ha generado mediante herramientas software sin manipulación, 2) se generó en una fecha determinada. Además, el comprador al recibir el dispositivo debe poder usar unas tools software que le aseguren que es la misma identidad y descripción.

Testimonials:

> As a (user) \_\_\_ I Can (action) \_\_\_\_ So that (value for the user) \_\_\_\_

As a refurbisher with role (seller) of refurbished devices I can :

1. Puedo generar un documento (pdf, url) con la identidad del dispositivo y los componentes que incluye

2. Puedo generar un documento (pdf, url) con el proceso de reacondicionado y las pruebas realizadas, especialmente el borrado de datos y el test de disco y de stress.

As a Final User with role (buyer) I can:

1. Verificar que el dispositivo que tengo físicamente es un dispositivo virtual 

2. Tener la garantía que la información se ha generado con un software y que no ha sido modificada de manera manual.

### User Story 3: Supplier - Refurbishers credentials/reputation  

User roles: Supplier and refurbisher.

Un **supplier** es una empresa o una administración pública que tiene dispositivos usados que quiere que se destinen a la reutilización. Para ellos es difícil identificar que refurbishers tienen la capacidad de poder reportar de manera fiable el impacto creado en economía circular. Quieren poder identificar quales tienen esta habilidad por lo que algun sistema de credenciales/reputación les facilitaría esta búsqueda. Otras preguntas.

What questions should we be able to answer?

-   Which refurbisher/ITAD should the Product Owner choose in order to increase the reuse and the final recycling? Are there any metrics or standarized definitions for measuring impact and comparing? see figure \@ref(fig:figreuseimpact)
-   How they can encourage refurbishers/ITADs to account the impact of reuse and report the final recycling? Is there guidelines that provide a common basis for collecting this data? are there any standarized certification, third-party analyses for concisely communicating social and/or environmental performance? Are there any instruments for facilitating the diligence, assessment, monitoring and reporting of impact?
-   How can they or third parties know with certainty that a device has been reused and recycled without requiring the actors having to disclose business information or that may penalise them negatively? so how they can verify reuse and finaly recycling.

# Use Cases

## Certification/Reputation/Credentials

La certificación puede incidir en toda la parte de sistemas de reputación para los usuarios

In general, in a certification process, a third party is required to carry out an audit process in order to assess whether the data collected and accredited on the performance of the refurbisher has followed the ''standard''. Our proposal is avoid the need of a third party because we benefit from: a set of tools such as secure inventory management systems that automate the process of collecting this data and, a information blockchain technology in order to ensure this data is trustable and verificable.

### What questions should we be able to answer?

From the questions that Product Owners ask we can identify which metrics are relevant to them and also answering this kind of questions helps to improve their circularity.

Product Owners want to know:

-   Which refurbisher should the Product Owner choose in order to increase the reuse and the final recycling? Are there any metrics or standarized definitions for measuring impact and comparing? see figure \@ref(fig:figreuseimpact)
-   How can Product Owners encourage refurbishers to account the impact of reuse and report the final recycling? Is there guidelines that provide a common basis for collecting this data? are there any standarized certification, third-party analyses for concisely communicating social and/or environmental performance? Are there any instruments for facilitating the diligence, assessment, monitoring and reporting of impact?
-   How can Product Owner or third parties know with certainty that a device has been reused and recycled without requiring the actors having to disclose business information or that may penalise them negatively? so how they can verify reuse and finaly recycling.

Refurbishers what to know:

Above questions apply to refurbishers as well; they can not disengage of what they sell second-hand so they should be able to know whether the devices they distributed directly or through their partners have been reused and eventually recycled. The aim is to invest time in repairing those with the highest reuse output and expected durability.

-   How can the refurbishers identify which devices have the greatest potential for reuse?
-   How can they assure to its customers the quality of the refurbished products? and how buyers can verify it.

### A proposal of metrics and indicators

```{r figreusecredentials, echo= FALSE, out.width="100%", fig.align='center', fig.cap="eReuse Credentials"}
options(tinytex.verbose = TRUE)
knitr::include_graphics(file.path(".","figs","4.jpg"))
```

The eReuse certifications are composed of a set of metrics and indicators that are part of the eReuse standard. The purpose of this certification is allow to refurbishers self-audit their circularity and to report about it to its suppliers and customers. With this set of certificates/accreditation federated members differentiate from organisations that claim to promote reuse but actually engage in premature recycling or illegal export of electronic products or waste.

Refurbishers receive the eReuse.org label if they can certify: 1. to their suppliers the impact generated in the circular and social economy, 2. to their customers the quality of the refurbishment.

This information is credible because a set of tools have been developed that generate reliable information about the process, which is carried out on a database that cannot be modified (the blockchain), thus making the process auditable and comparable.

Thanks to the certifications, on the one hand, companies and public administrations can monitor the impact of the devices they dispose for reuse, whether they are recycled or reused, the impact this generates and the treatments that have been carried out. Secondly, from the second-hand buyer's point of view, the buyer will be able to know the process of refurbishment, with a certificate of quality and the classification of performance.

In conclusion having this certification diferentiate refurbishers federated to eReuse from free riders that do not report about what they receive, what and where they recycle.

### Process

### Quality of refurbishment

Per a incentivar el consum de segona mà dels dispositius digitals cal promoure l'excel·lència del procés de reacondicionat dut a terme pels centres de reutilització. La taula de la figura 1, presenta la informació que els consumidors volen tenir alhora de comprar un dispositiu de egona mà. Per ordre de prioritats del tercer al cinquè lloc, el consumidor vol estar informat en "3: classificació", "4:Informació del procés de reacondicionat, i "5: Certificat de qualitat". En termes generals el consumidor ha de poder confiar en que la informació del dispositiu que ofereix el centre de reutilització ha estat generada de manera segura i no ha estat alterada. La informació a mostrar ha de complir amb els següents requisits: 1. Generació: Les dades han estat generades de manera automàtica i segura amb un programari que s'ha executat al dispositiu reacondicionat. El resultat de l'execució del programari es publica directament al web del dispositiu. 2. Modificació: Les dades no són modificables manualment. En el cas que la qualitat del dispositiu o algun dels seus components hagi variat, s'hauria de tornar a executar el programari pel punt anterior. 3. Accés obert: Les dades han de ser accessibles via un enllaç web que no ha de requerir un usuari i clau, a més també s'hauria de permetre accedir via un codi QR adherit al dispositiu que enllaça a la web del dispositiu. A mode d'exemple, a la següent pàgina web consta un dispositiu que ha estat reacondicionat per un centre de reutilització. La informació inclou els tres aspectes que formen part de la descripció de la qualitat del reacondicionat, que són: 1.1: Especificacions, 1.2: Classificació i 1.3: Procés de reacondicionat. A més el centre compleix amb els tres requisits de generació, modificació i accés obert:

A mode d'exemple, a la següent pàgina web consta un dispositiu que ha estat reacondicionat per un centre de reutilització. La informació inclou els tres aspectes que formen part de la descripció de la qualitat del reacondicionat, que són: 1.1: Especificacions, 1.2: Classificació i 1.3: Procés de reacondicionat. A més el centre compleix amb els tres requisits de generació, modificació i accés obert:

<https://api.usody.com/usody/devices/2DBZ9> Figura 6: Pàgina web pública del dispositiu A l'enllaç web també s'hi pot accedir via la lectura d'un codi QR que està adherit al dispositiu:

Figura 7: Codi QR enllaçant a la pàgina web

#### Especificacions

A la pàgina web del dispositiu almenys ha de constar 8 la marca del fabricant i model del dispositiu. En l'exemple presentat, es pot identificar que es tracta d'un dispositiu de marca ("Manufacturer") Fujitsu, ("model"): Esprimo e500 i de tipus escriptori ("Tower").

Figura 8: Característiques del dispositiu

A la web del dispositiu també s'hi han de mostrar els seus principals components. En el cas d'un dispositiu de tipus escriptori volem saber: el processador (intel core i7) la memoria RAM (8GB), la memoria del disc dur (Data storage - 500 GB), la tarjeta gràfica i si disposa de tarja de xarxa.

Figura 9: Característiques dels components

#### Classificació

A la pàgina web també ha de constar una classificació del dispositiu. En el nostre cas, utilitzem un algoritme, (Franquesa, 2018) 9 que dona una puntuació de 0 a 5 en base a les comparatives dels dispositius registrats al sistema. Els dispositius que tenen unes prestacions de rendiment acceptables per a ser reutilitzables reben una puntuació superior a tres (Total Rate). Els principals components també són avaluats per separat.

Figura 10: Puntuació del disc dur

Figura 11: Puntuació de la memòria RAM

Figura 12: Puntuació del processador.

Figura 13: Puntuació total del dispositiu

#### Procés de reacondicionat

A la pàgina web es mostra el procés de reacondicionat realitzat pel centre de reutilització i els resultats dels tests de funcionament, tant a nivell de component com de dispositiu. Amb l'objectiu de permetre la verificació per part del consumidor, també s'indica quin programari i versió ha estat emprat per a fer el tests de funcionament, tal que el consumidor pot reproduir el procés per validar que els resultats són els indicats en el moment de la seva compra.

Figura 14: Registre del procés de reacondicionat

### Informes de reutilització i reciclatge

Els centres de reutilització federats a eReuse han d'estar en disposició de poder emetre un informe als seus donants sobre la traçabilitat i l'impacte en economia circular, tant ambiental com social, dels dispositius que han rebut. Principalment, per a cada dispositiu que rep un centre, ha d'informar si l'ítem en qüestió ha acabat sent reciclat o reutilitzat. Aquest informe l'emeten directament als seus donants o ho fa Pangea en cas de que sigui aquesta última la que els ha derivat des del Circuit Pangea. Per tal de poder traçar un dispositiu ens cal poder generar un identificador que sigui únic a nivell global i autogenerable. A aquest identificador l'anomenem el passaport del dispositiu.

### Informe de reutilització

Els donants de dispositius principalment volen saber si els dispositius s'han reutilitzat o reciclat. Dels dispositius reutilitzats, en concret, volen saber a quina entitat consumidora s'han destinat i quin import ha hagut d'assumir. L'import és molt rellevant en el cas dels circuit Pangea doncs s'estableix que aquest hauria de ser similar al de la suma del cost de recollida, emmagatzemament, reacondicionat, distribució, traçabilitat i informe d'impacte. Altre informació que hauria d'introduir-se per a poder fer l'informe seria poder saber el segment de consumidors i el nombre d'usuaris estimats que faran ús dels dispositius. eReuse considera que aquesta és la informació material d'un informe de reutilització i posa a disposició dels centres de reutilització un sistema d'inventaris i de traçabilitat per introduir la informació i per a generar un informe de reutilització:

11. Si l'identificador de maquinari és el mateix, el resultat d'aplicar la funció de hash donarà el mateix resultat.

Figura 18: Traçabilitat de l'acció de reutilització

El sistema d'inventaris eReuse permet definir l'acció "Allocate", que significa que un dispositiu ha passat a ser reutilitzat (veure figura 18). En la descripció de l'acció "Allocate" (veure figura 19) les dades més rellevants són: i) la data de transferència del dispositiu (start date), ii) la transaction (el codi de transacció anònim de referència per si el centre de reutilització rep una auditoria del donant o de Pangea), iii) el segment d'usuaris finals que faran ús dels dispositius (Final user Code), i iv) el número d'usuaris finals estimats que faran ús del dispositiu (Number Final Users). Aquesta informació és privada pel que queda anonimitzada a partir de l'identificador (transaction).

Figura 19: Introducció d'informació de reutilització

En el moment que el donant o Pangea ho requereixi, el centre de reutilització pot generar un informe de reutilització amb la relació dels dispositius que ha rebut del donant i el seu estat, reutilitzat o reciclat.

Per a generar l'informe a un donant, s'ha de seleccionar els equips del donant que estan en reutilització. En la següent figura s'han seleccionat tots els dispositius d'un donant en particular i això mostra tots els dispositius (veure figura 21).

Figura 20: Lots de reutilització d'un donant

Mitjançant l'opció Export-\> Metrics Spreadsheet es genera una fulla excel on figura l'estat de cadascun dels dispositius que pot ser reutilitzat o reciclat.

Figura 21: Dispositius en reutilització d'un donant en particular

Figura 22: Informe de dispositius en reutilització

En la figura 22 es mostra com tots els dispositius estan en reutilització

### Informe de reciclatge

El sistema eReuse permet definir l'acció "Deallocate", que significa que un dispositiu ha deixat d'estar en estat reutilització. En aquesta acció indicarem una data i un codi de transacció que pel centre de reutilització significa el seu reciclatge.

Figura 23: Introducció d'informació de reciclatge

Seguint un procés similar al de l'informe dels dispositius en reutilització, generem un informe de reciclatge.

En l'acció 2 explicarem com els centres de reutilització fan el procés de certificació d'aquesta informació i com els donants i Pangea en poden fer l'auditoria

## Compartir la circularitat dels models de dispositius

Els centres de reutilització que comparteixen amb eReuse les dades per a mesurar la vida útil dels dispositius reben aquesta acreditació. A continuació expliquem quatre conceptes que ens ajudaran a entendre la importància de compartir aquestes dades amb la comunitat eReuse.

1.  La vida útil potencial: la vida útil potencial d'un dispositiu és el temps des del llançament o data fabricació del dispositiu fins que es recull per al seu reciclatge. En l'exemple de la figura 24, la vida útil potencial seria de 9 anys. Per a poder-ho calcular necessitem que el centre de reutilització ens cedeixin la data de registre en el seu centre.

2.  La vida útil: la vida útil d'un dispositiu és el temps des de la venda del producte fins al moment en què es descarta. En l'exemple de la figura 24, seria de 6 anys (2 primer cicle d'ús + 4 segon cicle d'ús). Per a poder-ho calcular necessitem dues dates, la data que es va vendre 12 a l'usuari i la data que l'usuari se'n va desfer 13 .

3.  Les hores de funcionament: les hores de funcionament d'un dispositiu són les hores que ha estat engegat (Powered On). En l'exemple de la figura 25 serien 40.000 hores. Per a poder-ho calcular necessitem que el centre de reutilització faci una lectura del valor Powered-On-Hours 14 del disc dur.

4.  Les hores d'apagat: Les hores d'apagat d'un dispositiu són les hores que ha estat apagat (Powered Off). Les hores s'obtenen de la diferència d'hores de la vida útil del dispositiu i les hores Powered on.

Figura 24: Vida útil potencial i vida útil d'un dispositiu

12 La data de venta a l'usuari consumidor: data en que el dispositiu es ven a un usuari. En en cas que sigui de segona mà i es tracti d'un centre de reutilització federat a eReuse tindrem aquesta data. Si no tenim la certesa de tenir aquesta data, agafarem la data de fabricació.

13 La data en que el consumidor se'n desfà: la inferim a partir de la data del darrer accés a disc.

14 Hores en engegat (POH): durada en hores que un dispositiu està engegat. <https://en.wikipedia.org/wiki/Power-on_hours>

Figura 25: Hores en funcionament (Powered on) i hores en apagat (Powered Off)

A partir de les dades anteriors, els membres federats a eReuse poden millorar el procés de filtratge dels dispositius que reben identificant millor els que tenen un major potencial de reutilització. En la figura 26 hi ha un exemple d'anàlisi de durabilitat del model de dispositiu Acer Veriton M480 per al que tenim 200 observacions. Es pot identificar que hi ha un dispositiu que ha superat les 65 mil hores i que la vida útil potencial és, de mitjana, d'uns 8 anys. La utilitat d'aquesta informació per al centre és que en cas de rebre dispositius del model amb menys de 10 mil hores, es pot establir que probablement estaran en funcionament almenys 10 mil hores més. Fent una analogia amb la compra de segona mà dels cotxes seria com saber els quilòmetres que ha recorregut el cotxe que et vols comprar. Aquesta informació també es pot fer pública de forma agregada per a que els consumidors sàpiguen la durabilitat dels models i ho tinguin en compte alhora de comprar-se un equip nou.

Figura 26: Análisis de la potencial vida útil d'un dispositiu Acer model Veriton M480

## Mesurar l'impacte social i circular.

La darrera certificació és la capacitat del centre de reutilització de poder oferir les dades per a mesurar l'impacte social i circular dels dispositius que rep. A partir de la informació recollida pel seu sistema es pot generar un informe d'impacte. Enguany estem treballant en la generació d'aquests informes que es generaran amb la informació recollida en els passos anteriors:

1.  Ambiental: dispositius reutilitzats i reciclats, components reutilitzats, extensió de la vida útil i localitat de reutilització/reciclatge

2.  Social: extensió de la vida útil, tipologia del centre de reutilització, segmentació dels beneficiaris

3.  Econòmic: import de la venta

The eReuse federation has developed an standard and an open-source toolset blockchain-based tech that implements it to allow organisations that are part of the cluster to measure its performance in the transition to circular economy and to self-certify in circularity allowing its verificability. This certification process result in a label for the organization that measures its contribution to reuse and recycling and with the agregated data on label for digital devices. Ultimately the aim is link this label to the EU Digital Product Passport initiative in a way that consumers willing to repair or dispose usable device to choose repairers, refurbishers and recyclers with grater circularity performance and consumers buying new or used device to choose devices with greater repairability and durability performance.

### Els processos d'estampa de dades i auditoria a la blockchain de eReuse

En el marc del projecte s'ha implementat un sistema informàtic que permet a partir d'unes dades generar una signatura digital (resum o hash 15 ) que s'afegeix al llibre de registre amb una marca de temps (una estampa), el que permet verificar i provar en el futur que aquelles dades les tenia en aquell moment qui va afegir aquella entrada al registre, ja que es poden trobar les següents dades (resum, marca temporal, id testimoni), protegides de modificacions posteriors i que, tot i no contenir les dades, sí conté el resum que només s'ha pogut generar amb les dades en qüestió. A l'Annex 1 s'inclou un resum del sistema implementat per validar aquesta funcionalitat de registrar dades i extreure després informació per validar i datar unes dades introduïdes prèviament.

En el marc del projecte s'ha implementat un sistema informàtic que permet a partir d'unes dades generar una signatura digital (resum o hash 15 ) que s'afegeix al llibre de registre amb una marca de temps (una estampa), el que permet verificar i provar en el futur que aquelles dades les tenia en aquell moment qui va afegir aquella entrada al registre, ja que es poden trobar les següents dades (resum, marca temporal, id testimoni), protegides de modificacions posteriors i que, tot i no contenir les dades, sí conté el resum que només s'ha pogut generar amb les dades en qüestió. A l'Annex 1 s'inclou un resum del sistema implementat per validar aquesta funcionalitat de registrar dades i extreure després informació per validar i datar unes dades introduïdes prèviament.

Quin mecanisme té Pangea per poder auditar les dades que el centre de reutilització li ha fet arribar? Com pot assegurar Pangea que l' informe en excel que els centres li han enviat no ha estat modificat de manera manual i que ha sortit d'un sistema de traçabilitat que implementa el protocol de eReuse? O quin mecanisme té eReuse (el clúster de les entitats federades) per a generar una acreditació per al centre de reutilització? Totes les respostes passen per una mateixa solució, la de registrar a una blockchain una signatura digital i una estampa de les dades dels centres de reutilització, assegurant així la seva immutabilitat a la blockchain, i que Pangea (i els seus donants) puguin verificar a la blockchain la seva autenticitat.

15 Una funció resum és un algorisme o funció per sumaritzar o identificar una dada (veure [https://ca.wikipedia.org/wiki/Funció_hash](https://ca.wikipedia.org/wiki/Funció_hash){.uri} per detalls).

A continuació presentem un resum dels passos d'un procés de certificació i auditoria d'un informe i en els apartats n'expliquem els detalls.

1.  Registre de la traçabilitat en els sistemes dels centres de reutilització: els centres de reutilització, mitjançant les eines explicades a l'acció 1, registren accions de traçabilitat i d'impacte dels equips que reben de Pangea.

2.  Exportar els informes del sistema de traçabilitat: Pangea demana al centres periòdicament (o altres donants que els propis centres puguin tenir, o el mateix clúster eReuse per a dotar-los de les distincions) un informe com el que s'ha explicat a l'acció 1 sobre reutilització i reciclatge. Els centres de reutilització exporten del seu sistema de traçabilitat l'informe. En el moment de l'exportació d'aquest, el sistema de traçabilitat genera i desa internament una signatura digital. Aquesta signatura s'utilitzarà posteriorment per a la blockchain per a verificar que les dades han sortit del sistema de traçabilitat del centre.

3.  Certificar els informes: el centre de reutilització, per tal certificar els informes que exporta del seu sistema de traçabilitat, ha d'accedir a la blockchain del clúster d'eReuse i desar allà la signatura digital de les dades. A la blockchain no es desen les dades per tal de preservar la anonimicitat i la privadesa de negoci dels centres de reutilització. En el moment de desar la signatura digital de les dades, també s'indica la direcció web del sistema de traçabilitat. Amb aquesta adreça, la blockchain verifica que en el sistema de traçabilitat existeix la mateixa signatura digital. Si existeix vol dir que es pot "creure les dades" i llavors les estampa a la blockchain.

4.  Auditar els informes: el centre de reutilització envia a Pangea (o a terceres parts) l'informe que hagi certificat a la blockchain i un enllaç web a la blockchain on en pot fer l'auditoria. Per a verificar l' informe, Pangea accedeix a la blockchain i adjunta l'informe que ha rebut del centre de reutilització. De manera automàtica, la blockchain verifica que la seva signatura digital existeix i li dona el dia i hora en que es va estampar.

## Procés de certificació dels informes

El centre de reutilització, per tal certificar els informes de qualitat, traçabilitat i d'impacte, els ha d'exportar del seu sistema de traçabilitat (veure acció 1: informes de reutilització i reciclatge). En el moment de l'exportació de l'informe, el sistema de traçabilitat genera i desa internament una signatura digital (més endavant explicarem quina utilitat té). Un cop el centre es descarrega el informe l'ha de desar al seu ordinador.

Per iniciar el procés de certificació ha de clickar al botó del menú "stamp" del seu sistema de traçabilitat. El botó "stamp" porta a una aplicació web que interactua amb la blockchain i permet crear una estampa o signatura digital de les dades del informe. La direcció per a crear una estampa és la següent: <http://dlt.ereuse.org/stamps/create>

Figura 27: Botó del sistema de traçabilitat per a realitzar una estampa

Figura 28: Estampa de la signatura digital de les dades - pujar informe

En el pas 1 de l'aplicació web el centre ha d'adjuntar el informe que s'ha descarregat al seu ordinador. En aquest pas l'aplicació web encara no interactua amb la blockchain de eReuse, tan sols fa la signatura digital i la retorna a l'usuari.

(0xdd09b89582da1d09c8a69f5a66bb8c8bcffe43088f9eaa4a42ee1f22f1bd4d30) Figura 29: codi de la signatura digital de les dades del fitxer (file hash)

Figura 30: Estampa de la signatura digital de les dades (o hash) - Pas 1 - adjuntar informe

En el pas 2 de l'aplicació web el centre de reutilització introdueix l'adreça de verificació del sistema d'eReuse (o de qualsevol altre que implementi el mateix protocol) que ha generat les dades del informe. Amb aquest pas prevenim la estampació de signatura digitals (hash) que no existeixin en un sistema de traçabilitat

En aquest exemple el sistema de traçabilitat que utilitza el centre de reutilització és el d' Usody 16 . Cal posar la següent adreça en el camp "verification URL".

Figura 31: Estampa de la signatura digital de les dades (o hash) - Pas 2: indicar l'adreça de verificació

<https://api.usody.com/usody/documents/check> Figura 32: Adreça de verificació del sistema de traçabilitat del centre de reutilització

Per a fer una demostració posarem primer una adreça de verificació incorrecte, per exemple, aquesta: "api.error.com/check". Com el codi hash retornat en el pas 1 no existeix en el sistema indicat a l'adreça de verificació, l'aplicació web retorna un error i no estampa la signatura digital a la blockchain.

El centre de reutilització fa click a continuar (next) la blockchain demana confirmació de la estampa que es vol fer i l'adreça de verificació a la que es consultarà.

Figura 33: Imatge d'error

Pel motiu comentat abans el resultat ha de ser un error doncs l'aplicació web, que està davant de la blockchain i interactua amb ella, no ha trobat a l'adreça de verificació que el centre de reutilització ha introduït.

Ara repetim el subpas 2 amb l'adreça de verificació del sistema de traçabilitat que ha generat l'informe, que seria: <https://api.usody.com/usody/documents/check/> El resultat ha estat exitós doncs la blockchain ha trobat que en el sistema de traçabilitat d'consta la signatura digital del informe.

Figura 34: Estampa de la signatura digital de les dades (o hash) - resultat

En l'exemple presentat el centre de reutilització ha generat una autocertificació del informe.

## Procés de verificació dels informes per part d'auditors

En aquest procés una tercera part vol poder auditar la autocertificació que ha fet el centre. Per exemple, posem pel cas que Pangea vol verificar l'autenticitat del informe que ha rebut del centre de reutilització en relació als dispositius d'un donant de Pangea. Per a verificar-ho s'ha d'adreçar a la següent pàgina web i introduïr l'informe:

<https://dlt.ereuse.org/stamps/check?url=https://api.usody.com/usody/documents/check/>

Figura 35: Verificar l'autenticitat d'un informe - adjuntar el informe

El resultat ha estat satisfactori, doncs la blockchain ha trobat la estampa (hash) de l'informe i retorna el dia i hora en que es va estampar a la blockchain (timestamp).

Figura 36: Retorn del dia i hora en que s'estampa a la blockchain

## Procés d'autoacreditació en el distintiu de eReuse

Per autoacreditar-se en els distintius de eReuse els centres de reutilització han de fer un procés de certificació d'un informe de cada tipus: un informe de qualitat (Devices Spreadsheets) i un altre de mètriques (Metrics Spreadsheet). Aquests informes els han d'enviar a la coordinadora de eReuse per a que en pugui fer la verificació.

Amb la verificació ja queda demostrat que tenen un sistema de traçabilitat i han fet una estampa a la blockchain del cluster de eReuse. Per a rebre el distintiu no és necessari que utilitzin els sistemes de traçabilitat que eReuse ofereix en programari lliure, només cal assegurar que es compleix el protocol que clúster d'entitats federades a eReuse han consensuat.

Figura 37: Informe de qualitat i de traçabilitat

En el cas de l'acreditació del Circuit Pangea han de fer el procés de certificació dels informes dels dispositius que Pangea els dona. Pangea, abans de d'enviar els informes als donants, fa el procediment de verificació per assegurar que hagin sortit d'un sistema que aplica el protocol de traçabilitat de eReuse.
